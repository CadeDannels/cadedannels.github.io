<!DOCTYPE html>
<html>
<head>
	<title>Weekly Assignment #8</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega@5"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-lite@4.8.1"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm//vega-embed@6"></script>
</head>
<body>
	<h1>Weekly Assignment #8</h1>
	<h3>Step One: Code</h3>
	<p>With this data I was interested in determining how arrests, citations, and warnings were shaped by what time of the day the stop occured. To do this I filtered the data by hour of the stop. I determined that a "Late Night" stop was between the hours of 10pm and 3am. I filtered the datapoints to have a True of False value for being "Late_At_Night". I also changed the Boolean values for the arrest, citation, and warning columns to be 1's and 0's so that I could perform some sort of aggregation. To aggregate the data I did a groupby on the "Late_At_Night" column while performing average functions on the arrest, citation, and warning columns so that I could determine what percent of stops led to these outcomes. </p>
	<p>Here is my <a href="https://github.com/CadeDannels/Denver-Policing">code</a></p>

	<h3>Step Two: Visualization</h3>
		<div id="vis"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-725718859ec323a865d1987b25a21f74"}, "mark": "bar", "encoding": {"color": {"type": "nominal", "field": "Late_At_Night"}, "tooltip": [{"type": "quantitative", "field": "arrest_made"}], "x": {"type": "nominal", "field": "Late_At_Night"}, "y": {"type": "quantitative", "field": "arrest_made"}}, "title": "Percent of Stops with an Arrest Based on Time of Day", "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-725718859ec323a865d1987b25a21f74": [{"Late_At_Night": false, "arrest_made": 12.93, "citation_issued": 19.64, "warning_issued": 10.3}, {"Late_At_Night": true, "arrest_made": 18.65, "citation_issued": 13.1, "warning_issued": 13.0}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>


		<div id="vis_2"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-725718859ec323a865d1987b25a21f74"}, "mark": "bar", "encoding": {"color": {"type": "nominal", "field": "Late_At_Night"}, "tooltip": [{"type": "quantitative", "field": "citation_issued"}], "x": {"type": "nominal", "field": "Late_At_Night"}, "y": {"type": "quantitative", "field": "citation_issued"}}, "title": "Percent of Stops with a Citation Based on Time of Day", "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-725718859ec323a865d1987b25a21f74": [{"Late_At_Night": false, "arrest_made": 12.93, "citation_issued": 19.64, "warning_issued": 10.3}, {"Late_At_Night": true, "arrest_made": 18.65, "citation_issued": 13.1, "warning_issued": 13.0}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis_2');
      vegaEmbed("#vis_2", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>

	<div id="vis_3"></div>
  <script>
    (function(vegaEmbed) {
      var spec = {"config": {"view": {"continuousWidth": 400, "continuousHeight": 300}}, "data": {"name": "data-725718859ec323a865d1987b25a21f74"}, "mark": "bar", "encoding": {"color": {"type": "nominal", "field": "Late_At_Night"}, "tooltip": [{"type": "quantitative", "field": "warning_issued"}], "x": {"type": "nominal", "field": "Late_At_Night"}, "y": {"type": "quantitative", "field": "warning_issued"}}, "title": "Percent of Stops with a Warning Based on Time of Day", "$schema": "https://vega.github.io/schema/vega-lite/v4.8.1.json", "datasets": {"data-725718859ec323a865d1987b25a21f74": [{"Late_At_Night": false, "arrest_made": 12.93, "citation_issued": 19.64, "warning_issued": 10.3}, {"Late_At_Night": true, "arrest_made": 18.65, "citation_issued": 13.1, "warning_issued": 13.0}]}};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div class="error" style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis_3');
      vegaEmbed("#vis_3", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>

<h3>Step Three: Analyze Findings</h3>	
<p>This visualization tells us a number of things. First of all, it tells us that, per stop, more arrests are made late at night (between the hours of 10pm and 3am) then during the day. This was a large difference too, with over 18% of all late night stops ending with an arrest vs about 13% during the day. This seems like a logical expectation because late at night you are more likely to have drunk drivers or other illegal activity.
</p>
<p>
The second bar chart tells us that more citations are made on average during the day. This seems counter-intuitive to our first example. Perhaps police officers just don't feel like going through the process of writing a citation late at night? This may be the case when we consider the third plot which shows that there are more warnings given late at night. This means that you are more likely to get off with a warning late at night than during the day. 
</p>
<p>
In the future I would like to look at the reasons why police are called late at night vs during the day to help inform this data. Knowing that information would help us justify why more arrests & warnings are made at night. Future questions I may also ask are: what hour of the day has the most arrests? What hour of the day gives the most citations? Is there a inverse relationship between arrests and citations?</p>
</body>
</html>